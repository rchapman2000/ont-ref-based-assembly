Jan-28 12:28:13.582 [main] DEBUG nextflow.cli.Launcher - $> nextflow run main.nf --help
Jan-28 12:28:13.676 [main] INFO  nextflow.cli.CmdRun - N E X T F L O W  ~  version 22.10.4
Jan-28 12:28:13.700 [main] DEBUG nextflow.plugin.PluginsFacade - Setting up plugin manager > mode=prod; embedded=false; plugins-dir=/home/rchap/.nextflow/plugins; core-plugins: nf-amazon@1.11.2,nf-azure@0.14.2,nf-codecommit@0.1.2,nf-console@1.0.4,nf-ga4gh@1.0.4,nf-google@1.4.5,nf-tower@1.5.6,nf-wave@0.5.2
Jan-28 12:28:13.712 [main] INFO  org.pf4j.DefaultPluginStatusProvider - Enabled plugins: []
Jan-28 12:28:13.713 [main] INFO  org.pf4j.DefaultPluginStatusProvider - Disabled plugins: []
Jan-28 12:28:13.716 [main] INFO  org.pf4j.DefaultPluginManager - PF4J version 3.4.1 in 'deployment' mode
Jan-28 12:28:13.727 [main] INFO  org.pf4j.AbstractPluginManager - No plugins
Jan-28 12:28:13.810 [main] DEBUG nextflow.cli.CmdRun - Applied DSL=2 from script declararion
Jan-28 12:28:13.833 [main] INFO  nextflow.cli.CmdRun - Launching `main.nf` [kickass_shaw] DSL2 - revision: 8d6708d564
Jan-28 12:28:13.834 [main] DEBUG nextflow.plugin.PluginsFacade - Plugins default=[]
Jan-28 12:28:13.834 [main] DEBUG nextflow.plugin.PluginsFacade - Plugins resolved requirement=[]
Jan-28 12:28:13.846 [main] DEBUG nextflow.secret.LocalSecretsProvider - Secrets store: /home/rchap/.nextflow/secrets/store.json
Jan-28 12:28:13.854 [main] DEBUG nextflow.secret.SecretsLoader - Discovered secrets providers: [nextflow.secret.LocalSecretsProvider@4fe01803] - activable => nextflow.secret.LocalSecretsProvider@4fe01803
Jan-28 12:28:13.945 [main] DEBUG nextflow.Session - Session UUID: 1bbe31f2-684a-4df9-9373-3ffb84211396
Jan-28 12:28:13.946 [main] DEBUG nextflow.Session - Run name: kickass_shaw
Jan-28 12:28:13.946 [main] DEBUG nextflow.Session - Executor pool size: 56
Jan-28 12:28:13.957 [main] DEBUG nextflow.util.ThreadPoolBuilder - Creating thread pool 'FileTransfer' minSize=10; maxSize=168; workQueue=LinkedBlockingQueue[10000]; allowCoreThreadTimeout=false
Jan-28 12:28:13.990 [main] DEBUG nextflow.cli.CmdRun - 
  Version: 22.10.4 build 5836
  Created: 09-12-2022 09:58 UTC (03:58 CDT)
  System: Linux 5.4.0-131-generic
  Runtime: Groovy 3.0.13 on OpenJDK 64-Bit Server VM 17.0.3-internal+0-adhoc..src
  Encoding: UTF-8 (UTF-8)
  Process: 4108083@ubuntu [127.0.1.1]
  CPUs: 56 - Mem: 251.8 GB (8.7 GB) - Swap: 22.3 GB (22.2 GB)
Jan-28 12:28:14.015 [main] DEBUG nextflow.Session - Work-dir: /home/rchap/Working/Pipelines-and-Scripts/ont-ref-based-assembly/work [ext2/ext3]
Jan-28 12:28:14.015 [main] DEBUG nextflow.Session - Script base path does not exist or is not a directory: /home/rchap/Working/Pipelines-and-Scripts/ont-ref-based-assembly/bin
Jan-28 12:28:14.025 [main] DEBUG nextflow.executor.ExecutorFactory - Extension executors providers=[]
Jan-28 12:28:14.036 [main] DEBUG nextflow.Session - Observer factory: DefaultObserverFactory
Jan-28 12:28:14.059 [main] DEBUG nextflow.cache.CacheFactory - Using Nextflow cache factory: nextflow.cache.DefaultCacheFactory
Jan-28 12:28:14.069 [main] DEBUG nextflow.util.CustomThreadPool - Creating default thread pool > poolSize: 57; maxThreads: 1000
Jan-28 12:28:14.396 [main] DEBUG nextflow.Session - Session start
Jan-28 12:28:15.590 [main] DEBUG nextflow.script.ScriptRunner - > Launching execution
Jan-28 12:28:15.601 [main] INFO  nextflow.Nextflow - 
ONT Referenced-Based Assembly Pipeline

This pipeline was built specifically for the assembly of Oxford Nanopore Sequencing
reads based on a given reference file.

The pipeline begins by trimming reads using Porechop. The trimmed reads are then aligned to the reference genome using minimap2.
Next, the alignment is corrected using medaka, and variants are called from this correction using Medaka and Longshot.
Finally, depth masking and variants are applied to the reference genome.

USAGE: nextflow run main.nf [options] --input INPUT_DIR --output OUTPUT_DIR --reference REFERENCE_FASTA --model MEDAKA_MODEL

OPTIONS:

--input INPUT_DIR - [Required] A directory containing demultiplexed, concatenated fastq files generated by Nanopore Sequencing

--output OUTPUT_DIR - [Required] A directory to place output files (If not existing, pipeline will create)

--reference REFERENCE_FASTA - [Required] A reference genome to align reads to.

--model MEDAKA_MODEL - [Required] Medaka requires a 'model' which corresponds to the flow-cell type/basecaller parameters used to correct for errors typical to that technology. Use 'medaka tools list_models' to find this.

OPTIONAL:

    --trim - The pipeline will use Porechop to identify and trim ONT adapters found within reads

    --minReadLen INT - If supplied, the pipeline will perform length filtering using NanoFilt excluding reads less than this size [Default = off]

    --maxReadLen INT - If supplied, the pipeline will perform legnth filtering using NanoFilt excluding reads greater than this size [Default = off]

    --noSecondaryAlignments - If supplied, the pipeline will filter secondary alignments [Default = off]

    --primers PRIMER_BED_FILE - Supply a bed file containing primer coordinates for clipping using 'Samtools Ampliconclip'

    --removeUnclipped - If supplied, the pipeline will remove unclipped reads from a bam alignment (Requires --primers option, [Default = off])

    --minClippedReadLen INT - If primers are supplied via the --primers option, this value will denote the minimum length of a clipped read for it to be considered in downstream analysis (Requires --primers option, [Default = 0])
    
    --minCov INT - The minimum coverage below which a position will be masked [Default = 20]

    --threads INT - The number of CPU threads that can be use to run pipeline tools in parallel

